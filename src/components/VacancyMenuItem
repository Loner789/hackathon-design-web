export default class VacancyMenuItem {
    constructor(data, selector, renderElementsToDOM, generateProph, generateVacancy, vacanciesProphMenuData, vacanciesData) {
      this._data = data;
      this._id = this._data.id;
      this._selector = selector;
      this._renderElementsToDOM = renderElementsToDOM;
      this._generateProph = generateProph;
      this._generateVacancy = generateVacancy;
      this._vacanciesProphMenuData = vacanciesProphMenuData;
      this._vacanciesData = vacanciesData;
      this._element = this._getElement();
      this._itemName = this._element.querySelector('.vacancies__btn-menu');

    }
  
    _getElement() {
      const elementTemplate = document.querySelector(this._selector).content;
      const elementCard = elementTemplate.querySelector('.vacancies__menu-item').cloneNode(true);
  
      return elementCard;
    }
  
    _setActiveClass() {
        const vacanciesProphMenu = document.querySelector('.vacancies__prophecy-menu');
        const vacancieSenseyGallary = document.querySelector('#sensey-gallary');

        if (this._id === 'programming') {
          this._itemName.classList.add('vacancies__btn-menu_active');
          this._element.classList.add('vacancies__menu-item_visible');
          this._renderElementsToDOM(this._vacanciesProphMenuData, vacanciesProphMenu, this._generateProph)
          this._renderElementsToDOM(this._vacanciesData.programming.sensey.data, vacancieSenseyGallary, this._generateVacancy)
        }
    }
  
    _handleBtnClick() {
        const vacancieEduItems = document.querySelectorAll('.vacancies__btn-menu');
        const vacanciesMenuItems = document.querySelectorAll('.vacancies__menu-item');
        const vacanciesGallaries = document.querySelectorAll('.vacancies__gallery');
        const vacanciesEduMenu = document.querySelector('.vacancies__education-menu');
        const vacancieProphItems = document.querySelectorAll('.vacancies__proph-btn-menu');
        const vacanciesDescriptionItems = vacancies.querySelectorAll('.vacancies__description');
        const vacancieNameBtn = vacancies.querySelectorAll('.vacancies__name');
        const vacGalleryArrows = vacancies.querySelectorAll('.vacancies__gallery-arrow');

        vacancieEduItems.forEach((item) => item.classList.remove('vacancies__btn-menu_active'));
        vacanciesMenuItems.forEach((item) => item.classList.remove('vacancies__menu-item_visible'));
        vacanciesGallaries.forEach((item) => item.classList.remove('vacancies__gallery_active'));
        vacanciesEduMenu.classList.remove('vacancies__education-menu_active');
        vacancieProphItems.forEach((item) => (item.disabled = true));
        vacancieProphItems.forEach((item) => item.classList.remove('vacancies__proph-btn-menu_active'));
        vacanciesDescriptionItems.forEach((item) => item.classList.remove('vacancies__description_active'));
        vacancieNameBtn.forEach((item) => item.classList.remove('vacancies__name_active'));
        vacGalleryArrows.forEach((item) => item.classList.remove('vacancies__gallery-arrow_active'));

        this._itemName.classList.add('vacancies__btn-menu_active');
        this._element.classList.add('vacancies__menu-item_visible');

    }
  
    _setEventListeners() {
      this._itemName.addEventListener('click', () => {this._handleBtnClick()});
    }
  
    generate() {
      this._itemName.textContent = this._data.name;
      this._itemName.id = this._data.id;
    
      this._setActiveClass();
      this._setEventListeners();
  
      return this._element;
    }
  }
  